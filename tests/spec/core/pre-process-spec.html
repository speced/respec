<!doctype html>
<script class='remove'>
let counter = 0;

function pass(id) {
  document.getElementById(id).innerHTML = `pass ${++counter}`;
}

function noOp() {}

function preSyncFunc() {
  pass("pre-sync");
}

function preAsyncFunc() {
  return new Promise(resolve => {
    setTimeout(() => {
      pass("pre-async");
      resolve();
    }, 4);
  });
}

function preWithWarning(_conf, _doc, utils) {
  pass("pre-warning");
  utils.showWarning("This is a warning");
}

function postSyncFunc() {
  pass("post-sync");
}

function postAsyncFunc() {
  return new Promise(resolve => {
    setTimeout(() => {
      pass("post-async");
      resolve();
    }, 4);
  });
}

function postWithDetailedError(_conf, _doc, utils) {
  pass("post-error");
  utils.showError("This is an error", {
    hint: "This is a hint",
    title: "This is a title",
    details: "This is a detailed error message",
    elements: [document.getElementById("post-error")],
  });
}

function afterEnd() {
  return new Promise(resolve => {
    setTimeout(() => {
      pass("afterend");
      resolve();
    }, 4);
  });
}

const respecConfig = {
  specStatus: "unofficial",
  shortName: "i",
  editors: [{
    name: "Foo",
    url: "https://foo.com/"
  }],
};

respecConfig.preProcess = [
  preSyncFunc,
  preAsyncFunc,
  noOp, {},
  preWithWarning
];

respecConfig.postProcess = [
  postSyncFunc,
  postAsyncFunc,
  postWithDetailedError,
  noOp, {},
];
respecConfig.afterEnd = afterEnd;
</script>
<section id='abstract'>
  <p>
    abstract.
  </p>
</section>
<section id='sotd'>
  <p>
    CUSTOM PARAGRAPH
  </p>
</section>
<section>
  <p id="pre-sync">FAIL</p>
  <p id="pre-async">FAIL</p>
  <p id="pre-warning">FAIL</p>
  <p id="post-sync">FAIL</p>
  <p id="post-error">FAIL</p>
  <p id="post-async">FAIL</p>
  <p id="afterend">FAIL</p>
</section>
